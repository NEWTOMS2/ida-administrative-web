(self.webpackChunkida_admin_web_app=self.webpackChunkida_admin_web_app||[]).push([[43],{2043:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UsersModule:()=>oe});var o=n(1116),r=n(649),s=n(1041),l=n(9883),a=n(1882),i=n(4629),c=n(5366),u=n(9411);let d=(()=>{class e{constructor(e){this.usersService=e}resolve(){return this.usersService.get()}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(u.f))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n(6304),m=n(9713),g=n(2951),Z=n(9241),f=n(9199),h=n(5291),A=n(416);function T(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}var x=n(8198),v=n(4053),_=n(2935);function b(e,t){if(1&e&&(c.TgZ(0,"option",25),c._uU(1),c.ALo(2,"titlecase"),c.ALo(3,"translate"),c.qZA()),2&e){const e=t.$implicit,n=c.oxw();c.s9C("value",e),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,n.formatContent(e)))," ")}}function q(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij(" ",e.country," ")}}function C(e,t){if(1&e&&(c.TgZ(0,"option"),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.hij(" ",e," ")}}function U(e,t){1&e&&(c.TgZ(0,"span",26),c._uU(1),c.ALo(2,"uppercase"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"SAVE")),""))}function y(e,t){1&e&&(c.TgZ(0,"div",27),c._UZ(1,"span",28),c.qZA())}const O=function(e){return{"is-invalid":e}};let w=(()=>{class e{constructor(e,t,n,o,r){this.formBuilder=e,this.notification=t,this.dialogRef=n,this.usersService=o,this.translateService=r,this.spinnerLoader=!1,this.userTypes=x.vf,this.addresses=x.Lk}ngOnInit(){this.buildForm()}formatContent(e){return(0,A.F)(this.translateService,e.toUpperCase()).replace("_"," ")}searchStates(e){const t=this.addresses.find(t=>t.country===e);return t?t.cities:[]}createUser(){var e;if(this.userForm.markAllAsTouched(),this.userForm.valid){this.spinnerLoader=!0;const t=this.userForm.value,{country:n}=t,o=T(t,["country"]),r=Object.assign(Object.assign({},o),{country:null===(e=this.addresses.find(e=>e.country===n))||void 0===e?void 0:e.code});this.usersService.create(r).toPromise().then(()=>{this.spinnerLoader=!1,this.notification.showSuccessToast("USER_CREATED"),this.dialogRef.close("User added")}).catch(e=>{this.spinnerLoader=!1;const t=e.includes("already exists")?"USER_ALREADY_EXISTS":"GENERIC_ERROR";this.notification.showErrorToast(t)})}}buildForm(){this.userForm=this.formBuilder.group({email:["",s.kI.compose([s.kI.required,s.kI.pattern(x.s9)])],name:["",s.kI.compose([s.kI.required])],last_name:["",s.kI.compose([s.kI.required])],phone_number:["",s.kI.compose([s.kI.required])],role:["agent",s.kI.compose([s.kI.required])],country:["M\xe9xico",s.kI.compose([s.kI.required])],city:["Aguascalientes",s.kI.compose([s.kI.required])],detail_address:[""]})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.qu),c.Y36(v.T),c.Y36(_.so),c.Y36(u.f),c.Y36(r.sK))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-creation"]],decls:82,vars:78,consts:[[1,"basic-form","pt-4"],[1,"row","justify-content-center"],[1,"col-12","col-md-10"],["novalidate","",1,"needs-validation",3,"formGroup"],["id","name-group",1,"row","form-row","mb-4"],[1,"col-12","col-md-6","mb-4","mb-md-0"],[1,"form-label"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[1,"col-12","col-md-6"],["type","text","formControlName","last_name",1,"form-control",3,"ngClass"],["type","text","formControlName","phone_number",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-select",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["formControlName","country",1,"form-select",3,"ngClass"],[4,"ngFor","ngForOf"],["formControlName","city",1,"form-select",3,"ngClass"],["type","text","formControlName","detail_address",1,"form-control",3,"ngClass"],["id","name-group",1,"row","form-row","mb-4","mt-5","form-btn"],[1,"col-12","col-md-3"],["type","button",1,"btn","secondary-btn","btn-block",3,"click"],["class","btn-content",4,"ngIf","ngIfElse"],["class","text-center"],["loading",""],[3,"value"],[1,"btn-content"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sr-only"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"mat-dialog-content"),c.TgZ(4,"form",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"label",6),c._uU(8),c.ALo(9,"translate"),c.qZA(),c._UZ(10,"input",7),c.TgZ(11,"div",8),c._uU(12),c.ALo(13,"translate"),c.qZA(),c.qZA(),c.TgZ(14,"div",9),c.TgZ(15,"label",6),c._uU(16),c.ALo(17,"translate"),c.qZA(),c._UZ(18,"input",10),c.TgZ(19,"div",8),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",4),c.TgZ(23,"div",5),c.TgZ(24,"label",6),c._uU(25),c.ALo(26,"translate"),c.qZA(),c._UZ(27,"input",11),c.TgZ(28,"div",8),c._uU(29),c.ALo(30,"translate"),c.qZA(),c.qZA(),c.TgZ(31,"div",9),c.TgZ(32,"label",6),c._uU(33),c.ALo(34,"translate"),c.qZA(),c._UZ(35,"input",12),c.TgZ(36,"div",8),c._uU(37),c.ALo(38,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",4),c.TgZ(40,"div",5),c.TgZ(41,"label",6),c._uU(42),c.ALo(43,"translate"),c.qZA(),c.TgZ(44,"select",13),c.YNc(45,b,4,6,"option",14),c.qZA(),c.TgZ(46,"div",8),c._uU(47),c.ALo(48,"translate"),c.qZA(),c.qZA(),c.TgZ(49,"div",9),c.TgZ(50,"label",6),c._uU(51),c.ALo(52,"translate"),c.qZA(),c.TgZ(53,"select",15),c.YNc(54,q,2,1,"option",16),c.qZA(),c.TgZ(55,"div",8),c._uU(56),c.ALo(57,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(58,"div",4),c.TgZ(59,"div",5),c.TgZ(60,"label",6),c._uU(61),c.ALo(62,"translate"),c.qZA(),c.TgZ(63,"select",17),c.YNc(64,C,2,1,"option",16),c.qZA(),c.TgZ(65,"div",8),c._uU(66),c.ALo(67,"translate"),c.qZA(),c.qZA(),c.TgZ(68,"div",9),c.TgZ(69,"label",6),c._uU(70),c.ALo(71,"translate"),c.qZA(),c._UZ(72,"input",18),c.TgZ(73,"div",8),c._uU(74),c.ALo(75,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(76,"div",19),c.TgZ(77,"div",20),c.TgZ(78,"button",21),c.NdJ("click",function(){return t.createUser()}),c.YNc(79,U,4,5,"span",22),c.YNc(80,y,2,0,"ng-template",23,24,c.W1O),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.MAs(81);let n,o,r,s,l,a,i,u,d;c.xp6(4),c.Q6J("formGroup",t.userForm),c.xp6(4),c.Oqu(c.lcZ(9,30,"NAME")),c.xp6(2),c.Q6J("ngClass",c.VKq(62,O,(null==(n=t.userForm.get("name"))?null:n.invalid)&&(null==(n=t.userForm.get("name"))?null:n.touched))),c.xp6(2),c.hij(" ",c.lcZ(13,32,"INTRODUCE_NAME")," "),c.xp6(4),c.Oqu(c.lcZ(17,34,"LAST_NAME")),c.xp6(2),c.Q6J("ngClass",c.VKq(64,O,(null==(o=t.userForm.get("last_name"))?null:o.invalid)&&(null==(o=t.userForm.get("last_name"))?null:o.touched))),c.xp6(2),c.hij(" ",c.lcZ(21,36,"INTRODUCE_LAST_NAME")," "),c.xp6(5),c.Oqu(c.lcZ(26,38,"PHONE_NUMBER")),c.xp6(2),c.Q6J("ngClass",c.VKq(66,O,(null==(r=t.userForm.get("phone_number"))?null:r.invalid)&&(null==(r=t.userForm.get("phone_number"))?null:r.touched))),c.xp6(2),c.hij(" ",c.lcZ(30,40,"INTRODUCE_PHONE_NUMBER")," "),c.xp6(4),c.Oqu(c.lcZ(34,42,"EMAIL_ADDRESS")),c.xp6(2),c.Q6J("ngClass",c.VKq(68,O,(null==(s=t.userForm.get("email"))?null:s.invalid)&&(null==(s=t.userForm.get("email"))?null:s.touched))),c.xp6(2),c.hij(" ",c.lcZ(38,44,"INTRODUCE_EMAIL")," "),c.xp6(5),c.Oqu(c.lcZ(43,46,"USER_TYPE")),c.xp6(2),c.Q6J("ngClass",c.VKq(70,O,(null==(l=t.userForm.get("role"))?null:l.invalid)&&(null==(l=t.userForm.get("role"))?null:l.touched))),c.xp6(1),c.Q6J("ngForOf",t.userTypes),c.xp6(2),c.hij(" ",c.lcZ(48,48,"INTRODUCE_USER_TYPE")," "),c.xp6(4),c.Oqu(c.lcZ(52,50,"COUNTRY")),c.xp6(2),c.Q6J("ngClass",c.VKq(72,O,(null==(a=t.userForm.get("country"))?null:a.invalid)&&(null==(a=t.userForm.get("country"))?null:a.touched))),c.xp6(1),c.Q6J("ngForOf",t.addresses),c.xp6(2),c.hij(" ",c.lcZ(57,52,"INTRODUCE_COUNTRY")," "),c.xp6(5),c.Oqu(c.lcZ(62,54,"CITY")),c.xp6(2),c.Q6J("ngClass",c.VKq(74,O,(null==(i=t.userForm.get("city"))?null:i.invalid)&&(null==(i=t.userForm.get("city"))?null:i.touched))),c.xp6(1),c.Q6J("ngForOf",t.searchStates((null==(u=t.userForm.get("country"))?null:u.value)||"")),c.xp6(2),c.hij(" ",c.lcZ(67,56,"INTRODUCE_CITY")," "),c.xp6(4),c.Oqu(c.lcZ(71,58,"ADDRESS")),c.xp6(2),c.Q6J("ngClass",c.VKq(76,O,(null==(d=t.userForm.get("detail_address"))?null:d.invalid)&&(null==(d=t.userForm.get("detail_address"))?null:d.touched))),c.xp6(2),c.hij(" ",c.lcZ(75,60,"INTRODUCE_ADDRESS")," "),c.xp6(5),c.Q6J("ngIf",!t.spinnerLoader)("ngIfElse",e)}},directives:[_.xY,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,o.mk,s.EJ,o.sg,o.O5,s.YN,s.Kr],pipes:[r.X$,o.rS,o.gd],styles:[".form-btn[_ngcontent-%COMP%]{justify-content:center}.form-btn[_ngcontent-%COMP%]   .btn-content[_ngcontent-%COMP%]{font-size:.8rem!important}.form-select[_ngcontent-%COMP%]{border:1px solid #63709f}"]}),e})();var E=n(3242),N=n(1608);function F(e,t){if(1&e&&(c.TgZ(0,"option",33),c._uU(1),c.qZA()),2&e){const e=t.$implicit,n=c.oxw();let o;c.Q6J("selected",e.code==(null==(o=n.userDetailsForm.get("country"))?null:o.value)),c.xp6(1),c.hij(" ",e.country," ")}}function L(e,t){if(1&e&&(c.TgZ(0,"option",33),c._uU(1),c.qZA()),2&e){const e=t.$implicit,n=c.oxw();c.Q6J("selected",e==n.user.city),c.xp6(1),c.hij(" ",e," ")}}function I(e,t){if(1&e&&(c.TgZ(0,"option",33),c._uU(1),c.ALo(2,"titlecase"),c.ALo(3,"translate"),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.Q6J("selected",e.translatedType.toLowerCase()==(null==n.user.role?null:n.user.role.toLowerCase())),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,n.formatContent(e.type)))," ")}}const D=function(e){return{"is-invalid":e}};function S(e,t){if(1&e&&(c.TgZ(0,"select",34),c.NdJ("disabled",function(){return!0}),c.YNc(1,I,4,6,"option",13),c.qZA()),2&e){const e=c.oxw();let t;c.Q6J("ngClass",c.VKq(2,D,(null==(t=e.userDetailsForm.get("role"))?null:t.invalid)&&(null==(t=e.userDetailsForm.get("role"))?null:t.touched))),c.xp6(1),c.Q6J("ngForOf",e.userTypes)}}function R(e,t){1&e&&c._UZ(0,"input",35)}function J(e,t){if(1&e&&(c.TgZ(0,"option",33),c._uU(1),c.ALo(2,"titlecase"),c.ALo(3,"translate"),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.Q6J("selected",e.translatedState==n.user.state),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,e.state))," ")}}function k(e,t){if(1&e&&(c.TgZ(0,"select",36),c.YNc(1,J,4,6,"option",13),c.qZA()),2&e){const e=c.oxw();let t;c.Q6J("ngClass",c.VKq(2,D,(null==(t=e.userDetailsForm.get("state"))?null:t.invalid)&&(null==(t=e.userDetailsForm.get("state"))?null:t.touched))),c.xp6(1),c.Q6J("ngForOf",e.userStates)}}function Y(e,t){1&e&&c._UZ(0,"input",37)}function M(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"SAVE")))}function Q(e,t){1&e&&(c.TgZ(0,"div",38),c._UZ(1,"span",39),c.qZA())}let j=(()=>{class e{constructor(e,t,n,o,r,s){this.formBuilder=e,this.translateService=t,this.router=n,this.userService=o,this.notification=r,this.activatedRoute=s,this.update=new c.vpe,this.addresses=x.Lk,this.spinnerLoader=!1,this.showUpdate=!1}ngOnInit(){this.buildEnums(),this.buildUser(),this.buildForm()}formatContent(e){return(0,A.F)(this.translateService,e.toUpperCase()).replace("_"," ")}buildEnums(){this.userTypes=x.vf.map(e=>({type:e,translatedType:(0,A.F)(this.translateService,e.toUpperCase())})),this.userStates=x.BI.map(e=>({state:e,translatedState:(0,A.F)(this.translateService,e)}))}buildUser(){this.activatedRoute.data.subscribe(e=>{var t;this.actualUser=e.user,this.showUpdate=(null===(t=e.user)||void 0===t?void 0:t.email)!=this.user.email})}searchStates(e){const t=this.addresses.find(t=>t.country===e||t.code===e);return t?t.cities:[]}updateUser(){var e,t;if(this.userDetailsForm.valid&&this.userDetailsForm.dirty){this.spinnerLoader=!0;const n={};Object.entries(this.userDetailsForm.value).filter(e=>null!=e[1]).forEach(e=>{n[e[0]]=e[1]});let{state:o,role:r}=n,s=T(n,["state","role","email"]);o=null===(e=this.userStates.find(e=>e.translatedState==o||e.state==o))||void 0===e?void 0:e.state,r=null===(t=this.userTypes.find(e=>e.translatedType==r||e.type==r))||void 0===t?void 0:t.type;const l=Object.assign(Object.assign({},s),{state:"INACTIVE"==o?"OFF_LINE":"AVAILABLE",role:r});this.userService.update(l,this.user.id||0).toPromise().then(()=>{this.spinnerLoader=!1,this.notification.showSuccessToast("USER_SUCCESSFULLY_UPDATED"),this.update.emit(this.userDetailsForm.value)}).catch(e=>{this.spinnerLoader=!1,this.notification.showErrorToast(e="Duplicated key"==e?"DUPLICATED_PHONE_NUMBER":"GENERIC_ERROR")})}}buildForm(){var e,t;let n=null===(e=this.addresses.find(e=>e.code==this.user.country||e.country==this.user.country))||void 0===e?void 0:e.code;this.user.city&&(n=null===(t=this.addresses.find(e=>e.cities.some(e=>e==this.user.city)))||void 0===t?void 0:t.code),this.userDetailsForm=this.formBuilder.group({name:[this.user.name,s.kI.compose([s.kI.required,s.kI.minLength(3)])],last_name:[this.user.lastname,s.kI.compose([s.kI.required,s.kI.minLength(3)])],phone_number:[this.user.phoneNumber,s.kI.compose([s.kI.required,s.kI.minLength(7)])],email:[this.user.email,s.kI.compose([s.kI.required,s.kI.pattern(x.s9)])],country:[n,[]],city:[this.user.city],detail_address:[this.user.address],role:[this.user.role],state:[this.user.state]})}seeRequests(){this.router.navigateByUrl("/account/tickets",{state:{userToFilter:this.user.email}})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.qu),c.Y36(r.sK),c.Y36(l.F0),c.Y36(u.f),c.Y36(v.T),c.Y36(l.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-details"]],inputs:{user:"user"},outputs:{update:"update"},decls:101,vars:91,consts:[["novalidate","",1,"needs-validation","basic-form",3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],[1,"row","form-row","mb-4"],[1,"col-12","col-md-6","mb-4","mb-md-0"],[1,"form-label"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],[1,"invalid-feedback"],[1,"col-12","col-md-6"],["type","text","formControlName","last_name",1,"form-control",3,"ngClass"],["type","text","formControlName","phone_number",1,"form-control",3,"ngClass"],["readonly","","type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","country",1,"form-select",3,"ngClass"],[3,"selected",4,"ngFor","ngForOf"],["formControlName","city",1,"form-select",3,"ngClass"],["value","",3,"selected"],[1,"col-12"],["type","text","formControlName","detail_address",1,"form-control",3,"ngClass"],[1,"col-md-6","col-12","actions-wrapper"],[1,"row","form-row","mb-4","justify-content-center"],[1,"col-12","col-md-8","mb-4","mb-md-0"],["class","form-select","formControlName","role",3,"ngClass","disabled",4,"ngIf"],["readonly","","type","text","formControlName","role","class","form-control",4,"ngIf"],["class","form-select","formControlName","state",3,"ngClass",4,"ngIf"],["readonly","","type","text","formControlName","state","class","form-control",4,"ngIf"],[1,"row","form-row","justify-content-center","form-actions"],[1,"col-md-8","col-12","mb-1"],[1,"btn","light-btn",3,"click"],[1,"col-md-8","col-12","mb-4","mb-md-0",3,"click"],[1,"btn","secondary-btn"],[4,"ngIf","ngIfElse"],["class","text-center"],["loading",""],[3,"selected"],["formControlName","role",1,"form-select",3,"ngClass","disabled"],["readonly","","type","text","formControlName","role",1,"form-control"],["formControlName","state",1,"form-select",3,"ngClass"],["readonly","","type","text","formControlName","state",1,"form-control"],["role","status",1,"spinner-border","spinner-border-sm"],[1,"sr-only"]],template:function(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"form",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"label",5),c._uU(7),c.ALo(8,"translate"),c.qZA(),c._UZ(9,"input",6),c.TgZ(10,"div",7),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.qZA(),c.TgZ(13,"div",8),c.TgZ(14,"label",5),c._uU(15),c.ALo(16,"translate"),c.qZA(),c._UZ(17,"input",9),c.TgZ(18,"div",7),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",3),c.TgZ(22,"div",4),c.TgZ(23,"label",5),c._uU(24),c.ALo(25,"translate"),c.qZA(),c._UZ(26,"input",10),c.TgZ(27,"div",7),c._uU(28),c.ALo(29,"translate"),c.qZA(),c.qZA(),c.TgZ(30,"div",8),c.TgZ(31,"label",5),c._uU(32),c.ALo(33,"translate"),c.qZA(),c._UZ(34,"input",11),c.TgZ(35,"div",7),c._uU(36),c.ALo(37,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(38,"div",3),c.TgZ(39,"div",8),c.TgZ(40,"label",5),c._uU(41),c.ALo(42,"translate"),c.qZA(),c.TgZ(43,"select",12),c.YNc(44,F,2,2,"option",13),c.qZA(),c.TgZ(45,"div",7),c._uU(46),c.ALo(47,"translate"),c.qZA(),c.qZA(),c.TgZ(48,"div",4),c.TgZ(49,"label",5),c._uU(50),c.ALo(51,"translate"),c.qZA(),c.TgZ(52,"select",14),c.TgZ(53,"option",15),c._uU(54),c.ALo(55,"translate"),c.qZA(),c.YNc(56,L,2,2,"option",13),c.qZA(),c.TgZ(57,"div",7),c._uU(58),c.ALo(59,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(60,"div",3),c.TgZ(61,"div",16),c.TgZ(62,"label",5),c._uU(63),c.ALo(64,"translate"),c.qZA(),c._UZ(65,"input",17),c.TgZ(66,"div",7),c._uU(67),c.ALo(68,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(69,"div",18),c.TgZ(70,"div",19),c.TgZ(71,"div",20),c.TgZ(72,"label",5),c._uU(73),c.ALo(74,"translate"),c.qZA(),c.YNc(75,S,2,4,"select",21),c.YNc(76,R,1,0,"input",22),c.TgZ(77,"div",7),c._uU(78),c.ALo(79,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(80,"div",19),c.TgZ(81,"div",20),c.TgZ(82,"label",5),c._uU(83),c.ALo(84,"translate"),c.qZA(),c.YNc(85,k,2,4,"select",23),c.YNc(86,Y,1,0,"input",24),c.TgZ(87,"div",7),c._uU(88),c.ALo(89,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(90,"div",25),c.TgZ(91,"div",26),c.TgZ(92,"button",27),c.NdJ("click",function(){return t.seeRequests()}),c._uU(93),c.ALo(94,"translate"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(95,"div",19),c.TgZ(96,"div",28),c.NdJ("click",function(){return t.updateUser()}),c.TgZ(97,"button",29),c.YNc(98,M,3,3,"span",30),c.YNc(99,Q,2,0,"ng-template",31,32,c.W1O),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.MAs(100);let n,o,r,s,l,a,i,u;c.xp6(1),c.Q6J("formGroup",t.userDetailsForm),c.xp6(6),c.Oqu(c.lcZ(8,37,"NAME")),c.xp6(2),c.Q6J("ngClass",c.VKq(77,D,(null==(n=t.userDetailsForm.get("name"))?null:n.invalid)&&(null==(n=t.userDetailsForm.get("name"))?null:n.touched))),c.xp6(2),c.hij(" ",c.lcZ(12,39,"INTRODUCE_NAME")," "),c.xp6(4),c.Oqu(c.lcZ(16,41,"LAST_NAME")),c.xp6(2),c.Q6J("ngClass",c.VKq(79,D,(null==(o=t.userDetailsForm.get("last_name"))?null:o.invalid)&&(null==(o=t.userDetailsForm.get("last_name"))?null:o.touched))),c.xp6(2),c.hij(" ",c.lcZ(20,43,"INTRODUCE_LAST_NAME")," "),c.xp6(5),c.Oqu(c.lcZ(25,45,"PHONE_NUMBER")),c.xp6(2),c.Q6J("ngClass",c.VKq(81,D,(null==(r=t.userDetailsForm.get("phone_number"))?null:r.invalid)&&(null==(r=t.userDetailsForm.get("phone_number"))?null:r.touched))),c.xp6(2),c.hij(" ",c.lcZ(29,47,"INTRODUCE_PHONE_NUMBER")," "),c.xp6(4),c.Oqu(c.lcZ(33,49,"EMAIL_ADDRESS")),c.xp6(2),c.Q6J("ngClass",c.VKq(83,D,(null==(s=t.userDetailsForm.get("email"))?null:s.invalid)&&(null==(s=t.userDetailsForm.get("email"))?null:s.touched))),c.xp6(2),c.hij(" ",c.lcZ(37,51,"INTRODUCE_EMAIL")," "),c.xp6(5),c.Oqu(c.lcZ(42,53,"COUNTRY")),c.xp6(2),c.Q6J("ngClass",c.VKq(85,D,(null==(l=t.userDetailsForm.get("country"))?null:l.invalid)&&(null==(l=t.userDetailsForm.get("country"))?null:l.touched))),c.xp6(1),c.Q6J("ngForOf",t.addresses),c.xp6(2),c.hij(" ",c.lcZ(47,55,"INTRODUCE_COUNTRY")," "),c.xp6(4),c.Oqu(c.lcZ(51,57,"CITY")),c.xp6(2),c.Q6J("ngClass",c.VKq(87,D,(null==(a=t.userDetailsForm.get("city"))?null:a.invalid)&&(null==(a=t.userDetailsForm.get("city"))?null:a.touched))),c.xp6(1),c.Q6J("selected",!t.user.city),c.xp6(1),c.hij(" ",c.lcZ(55,59,"SELECT_CITY")," "),c.xp6(2),c.Q6J("ngForOf",t.searchStates((null==(i=t.userDetailsForm.get("country"))?null:i.value)||"")),c.xp6(2),c.hij(" ",c.lcZ(59,61,"INTRODUCE_CITY")," "),c.xp6(5),c.Oqu(c.lcZ(64,63,"ADDRESS")),c.xp6(2),c.Q6J("ngClass",c.VKq(89,D,(null==(u=t.userDetailsForm.get("detail_address"))?null:u.invalid)&&(null==(u=t.userDetailsForm.get("detail_address"))?null:u.touched))),c.xp6(2),c.hij(" ",c.lcZ(68,65,"INTRODUCE_ADDRESS")," "),c.xp6(6),c.Oqu(c.lcZ(74,67,"USER_TYPE")),c.xp6(2),c.Q6J("ngIf",1==t.showUpdate),c.xp6(1),c.Q6J("ngIf",0==t.showUpdate),c.xp6(2),c.hij(" ",c.lcZ(79,69,"INTRODUCE_USER_TYPE")," "),c.xp6(5),c.Oqu(c.lcZ(84,71,"STATE")),c.xp6(2),c.Q6J("ngIf",1==t.showUpdate),c.xp6(1),c.Q6J("ngIf",0==t.showUpdate),c.xp6(2),c.hij(" ",c.lcZ(89,73,"INTRODUCE_USER_TYPE")," "),c.xp6(5),c.hij(" ",c.lcZ(94,75,"SEE_REQUESTS")," "),c.xp6(5),c.Q6J("ngIf",!t.spinnerLoader)("ngIfElse",e)}},directives:[s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,o.mk,s.EJ,o.sg,s.YN,s.Kr,o.O5],pipes:[r.X$,o.rS],styles:[".basic-form[_ngcontent-%COMP%]{background-color:#fff0!important}.actions-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions-wrapper[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:auto}.invalid-feedback[_ngcontent-%COMP%]{position:absolute!important}.form-select[_ngcontent-%COMP%]{border:1px solid #63709f}"]}),e})();function P(e,t){if(1&e&&(c.TgZ(0,"option",28),c._uU(1),c.ALo(2,"translate"),c.ALo(3,"uppercase"),c.qZA()),2&e){const e=t.$implicit;c.s9C("value",e),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,e))," ")}}function B(e,t){if(1&e&&(c.TgZ(0,"th",31),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){const e=c.oxw().$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,e.toUpperCase())," ")}}function K(e,t){if(1&e&&(c.TgZ(0,"td",32),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){const e=t.$implicit,n=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,e[n]))}}function V(e,t){1&e&&(c.ynx(0,29),c.YNc(1,B,3,3,"th",30),c.YNc(2,K,3,3,"td",23),c.BQk()),2&e&&c.s9C("matColumnDef",t.$implicit)}function $(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"td",32),c.TgZ(1,"div"),c.TgZ(2,"div",33),c.TgZ(3,"app-user-details",34),c.NdJ("update",function(t){return c.CHM(e),c.oxw().updateUser(t)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit,n=c.oxw();c.uIk("colspan",n.displayedColumns.length),c.xp6(1),c.Q6J("@detailExpand",e==n.expandedElement?"expanded":"collapsed"),c.xp6(2),c.Q6J("user",e)}}function z(e,t){1&e&&c._UZ(0,"tr",35)}function G(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",36),c.NdJ("click",function(){const t=c.CHM(e).$implicit,n=c.oxw();return n.expandedElement=n.expandedElement===t?null:t}),c._uU(1," > "),c.qZA()}if(2&e){const e=t.$implicit,n=t.dataIndex,o=c.oxw();c.ekj("example-expanded-row",o.expandedElement===e),c.Q6J("ngClass",o.setTableRowColor(n))}}function H(e,t){if(1&e&&c._UZ(0,"tr",37),2&e){const e=t.dataIndex,n=c.oxw();c.Q6J("ngClass",n.setTableRowColor(e))}}const X=function(){return["expandedDetail"]},W=function(){return[10,25,100]},ee=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this.translateService=e,this.dialog=t,this.activatedRoute=n,this.usersService=o,this.title=(0,A.F)(this.translateService,"USERS"),this.displayedColumns=["role","name","email","state"],this.searchIcon=h.wn1,this.userTypes=x.vf}ngOnInit(){this.getUsers(),this.buildTable()}ngAfterViewInit(){this.initDataTable()}updateUser(e){this.users=this.users.map(t=>t.email!=e.email?t:{id:t.id,name:e.name,lastname:e.last_name,phoneNumber:e.phone_number,email:e.email,country:e.country,city:e.city,address:e.detail_address,role:e.role,state:e.state}),this.refresh()}getUsers(){this.activatedRoute.data.subscribe(e=>{this.users=e.users||[]})}getUsersFromDb(){var e=this;return(0,p.Z)(function*(){return e.usersService.get().toPromise()})()}openUserCreationModal(){var e=this;this.dialog.open(w,{width:"700px",autoFocus:!1}).afterClosed().subscribe(function(){var t=(0,p.Z)(function*(t){"User added"==t&&(yield e.getUsersFromDb().then(t=>{e.users=t||[]}),e.refresh())});return function(e){return t.apply(this,arguments)}}())}applyFilter(e){const t=null===e.value?"":e.value;e=t.trim(),e=t.toLowerCase(),this.dataSource.filter=t}setTableRowColor(e){let t="";return e%2==0&&(t="table-row-item"),t}buildTable(){this.dataSource=new f.by(this.users)}initDataTable(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}refresh(){this.buildTable(),this.table.renderRows(),this.initDataTable()}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(r.sK),c.Y36(_.uw),c.Y36(l.gz),c.Y36(u.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users"]],viewQuery:function(e,t){if(1&e&&(c.Gf(g.NW,5),c.Gf(Z.YE,5),c.Gf(f.BZ,5)),2&e){let e;c.iGM(e=c.CRH())&&(t.paginator=e.first),c.iGM(e=c.CRH())&&(t.sort=e.first),c.iGM(e=c.CRH())&&(t.table=e.first)}},decls:37,vars:22,consts:[[3,"title"],[1,"container","table-container","px-0","mb-5"],[1,"row","justify-content-center"],[1,"col"],[1,"page-options","container","px-0","mb-4"],[1,"row","justify-content-center","justify-content-md-end"],[1,"col-12","col-md-2","text-end"],[1,"btn","secondary-btn",3,"click"],[1,"table-header","row","pb-5","pt-3","px-4"],[1,"col-12","col-md-3"],[1,"form-label"],[1,"form-select","small-searcher",3,"change"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-6"],[1,"form-label-searcher"],[1,"input-group"],["type","text","placeholder","Buscar",1,"form-control",3,"keyup"],[1,"input-group-text"],[3,"icon"],["mat-table","","matSort","","multiTemplateDataRows","",1,"table","mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","mat-row",3,"ngClass","example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",3,"ngClass",4,"matRowDef","matRowDefColumns"],[1,"paginator-table",3,"pageSizeOptions"],[3,"value"],[3,"matColumnDef"],["class","header-table","mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["mat-sort-header","","mat-header-cell","",1,"header-table"],["mat-cell",""],[1,"element-expand-content"],[3,"user","update"],["mat-header-row",""],["mat-row","",1,"mat-row",3,"ngClass","click"],["mat-row","",1,"example-detail-row",3,"ngClass"]],template:function(e,t){1&e&&(c.TgZ(0,"app-page-wrapper",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"div",6),c.TgZ(7,"button",7),c.NdJ("click",function(){return t.openUserCreationModal()}),c._uU(8),c.ALo(9,"uppercase"),c.ALo(10,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",8),c.TgZ(12,"div",9),c.TgZ(13,"label",10),c._uU(14),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"select",11),c.NdJ("change",function(e){return t.applyFilter(e.target)}),c.TgZ(17,"option",12),c._uU(18),c.ALo(19,"translate"),c.qZA(),c.YNc(20,P,4,6,"option",13),c.qZA(),c.qZA(),c._UZ(21,"div",9),c.TgZ(22,"div",14),c.TgZ(23,"label",15),c._uU(24,"Buscar"),c.qZA(),c.TgZ(25,"div",16),c.TgZ(26,"input",17),c.NdJ("keyup",function(e){return t.applyFilter(e.target)}),c.qZA(),c.TgZ(27,"span",18),c._UZ(28,"fa-icon",19),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"table",20),c.YNc(30,V,3,1,"ng-container",21),c.ynx(31,22),c.YNc(32,$,4,3,"td",23),c.BQk(),c.YNc(33,z,1,0,"tr",24),c.YNc(34,G,2,3,"tr",25),c.YNc(35,H,1,1,"tr",26),c.qZA(),c._UZ(36,"mat-paginator",27),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("title",t.title),c.xp6(8),c.hij(" ",c.lcZ(9,12,c.lcZ(10,14,"CREATE"))," "),c.xp6(6),c.Oqu(c.lcZ(15,16,"TYPE")),c.xp6(4),c.Oqu(c.lcZ(19,18,"ALL")),c.xp6(2),c.Q6J("ngForOf",t.userTypes),c.xp6(8),c.Q6J("icon",t.searchIcon),c.xp6(1),c.Q6J("dataSource",t.dataSource),c.xp6(1),c.Q6J("ngForOf",t.displayedColumns),c.xp6(3),c.Q6J("matHeaderRowDef",t.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",t.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",c.DdM(20,X)),c.xp6(1),c.Q6J("pageSizeOptions",c.DdM(21,W)))},directives:[E.t,s.YN,s.Kr,o.sg,N.BN,f.BZ,Z.YE,f.w1,f.Dz,f.as,f.nj,g.NW,f.fO,f.ge,Z.nU,f.ev,j,f.XQ,f.Gk,o.mk],pipes:[o.gd,r.X$],styles:[".header-table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{vertical-align:middle!important}tr.example-detail-row[_ngcontent-%COMP%]{height:0;box-shadow:inset 4px 0 0 #63709f}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.element-expand-content[_ngcontent-%COMP%]{padding:30px}@media (max-width:600px){.element-expand-content[_ngcontent-%COMP%]{padding:10px}}.row[_ngcontent-%COMP%]{--bs-gutter-x:0rem!important}td.mat-cell[_ngcontent-%COMP%], td.mat-footer-cell[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{border-bottom-style:none}.mat-row[_ngcontent-%COMP%]{border-bottom:none;cursor:pointer}.example-expanded-row[_ngcontent-%COMP%]{border-bottom:.1px solid #63709f73;box-shadow:inset 4px 0 0 #63709f}.paginator-table[_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:10px;border-bottom-right-radius:10px;overflow:hidden!important;box-shadow:0 1px 3px 1px #b5b5b58f}.small-searcher[_ngcontent-%COMP%]{width:90%}.form-control[_ngcontent-%COMP%]{font-size:.8rem!important;font-weight:400!important;color:#182249!important;background-color:#fff0!important;border:1px solid #63709f!important;border-right:0!important}.form-label-searcher[_ngcontent-%COMP%]{color:#fff0}.input-group-text[_ngcontent-%COMP%]{font-size:.85rem;color:#182249!important;text-align:center;white-space:nowrap;background-color:#fff0;border:1px solid #63709f!important;border-left:0!important}.page-options[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{min-width:75%;margin-bottom:3rem}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})(),canActivate:[a.t],resolve:{user:i.O,users:d}}];let te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(ee)],l.Bz]}),e})();var ne=n(532);let oe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[i.O,a.t,d],imports:[[o.ez,te,ne.m,r.aw,s.UX]]}),e})()}}]);